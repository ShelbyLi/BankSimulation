# BankSimulation
### 实验内容

设计一个多线程程序，模拟银行业务办理。需求定义如下：

1. 模拟客户可以随机办理银行提供的8种业务中的一种；其中办理时间规划为：（基准时间每个同学自行指定）

2. 程序模拟多个窗口服务，窗口服务具有一定的差异化，现在窗口的开放情况如下；

   | 窗口类型 | 能办理业务类型  | 说明             |
   | -------- | --------------- | ---------------- |
   | A类窗口  | 1,2,3,4,5,6,7,8 | 所有客户可以办理 |
   | B类窗口  | 1,2,4,5,7       | 所有客户可以办理 |
   | V类窗口  | 1,2,3,4,5,6,7,8 | VIP客户优先      |

   系统模拟窗口开放情况：

   A类：1个

   B类：2个

   V类：1个

3. 顾客模拟要求：

   1. 顾客分为普通客户和VIP客户，普通用户和VIP客户比例自行确定；
   2. 顾客到达随机模拟；

4. 模拟程序模拟一天的营业情况，在完成当天的营业（模拟为上午8:00-下午17:00）后打印出客户列表，包括以下项目：

   （客户名称，客户到达时间，客户办理业务类型，客户所用时间）

5. 统计出以下数据：

   1. 当天的所有顾客平均办理时间（从到达到办理完成时间定义为顾客办理时间）;
   2. 不同业务在所有办理业务中所占的比例

6. 仿真（*需要评定优秀的同学需要提供此部分实现）：

   1. 程序能够参数化设定当天到达客户办理不同业务的比例（比如业务1占20%等）

   2. 程序能够模拟回答以下问题：

      如果基准日开放的窗口情况为：

      A类：1个

      B类：2个

      V类：1个

      那么针对营业日B的情况，在相同顾客数量的情况下，要如何开发窗口才能得到和基准日基本一致的顾客平均服务时间；

      | 业务     | 基准日A | 营业日B |
      | -------- | ------- | ------- |
      | 存款     | 20%     | 10%     |
      | 取款     | 20%     | 10%     |
      | 缴纳罚款 | 10%     | 5%      |
      | 开通网银 | 10%     | 5%      |
      | 交水电费 | 5%      | 5%      |
      | 购买基金 | 15%     | 40%     |
      | 转账汇款 | 10%     | 5%      |
      | 个贷还款 | 10%     | 20%     |

      

### 考评要点

基本要求:

1. 编码规范；
2. 系统是多线程实现，并合理的进行了线程的互斥和同步设计；
3. 业务类型使用Enum类型
4. 程序中实现得各种存储都使用集合，不能使用数组；

设计核心问题

1. 程序整体结构设计
2. 营业过程管理（开门，关门，营业分配过程）
3. 用户到达模拟实现；
4. 窗口服务分配实现；
5. 仿真求解方法（考评的重点不是答案，而是为了求解答案而进行的设计方法）；

### 代码说明

#### 假设

1. 标准日普通用户占75%, VIP用户占25%. 特殊日可改变. 但在仿真求解时不考虑, 即按照标准日.

2. 银行只有4个窗口, 且VIP窗口必须开一个以上. (VIP窗口1个半永久)

3. VIP只在VIP窗口享有优先权.

4. 每天来的都是新的客户(编号从1开始 由于没有数据库等额外的要求 方便起见).

5. 模拟的时间为1s:0.001s (即将程序中的1ms作为银行一天的1s计算).

#### 类说明

package util:

```java
public enum CustomerType  // 枚举定义客户类型
public enum TaskType  // 枚举定义银行办理的8种业务
public enum WindowType  // 枚举定义窗口类型
public class CustomerTypePercentage  // 客户所占比例, 实现按比例随机返回某类型
public class TaskTypePercentage  // 该银行客户办理业务所占比例, 实现按比例返回某业务类型
public class RandomPro extends Random  // 实现根据比例返回某离散值的功能
public class WindowAllocation  // 4个窗口的分配情况记录
public class TimeShifting  // 将ms为单位的时间段按照比例 (见假设)
```

package entity:

```java
public class Customer  // 客户
public class Task  // 业务; 记录每个业务的时间等属性, 实现判断此业务是否是快速业务
public class TaskGenerator implements Runnable  // 线程, 生成任务; 每个任务的间隔随机; 若调用构造函数时指定了Random Seed, 则会使生成顾客的间隔相同, 即每天的顾客书相同.
public class Window implements Runnable  // 线程, 处理业务的窗口. 按照一定算法和此窗口属性获取一个正在等待的业务, 并用一定的随机时间完成此任务.
public class Bank  // 银行; 该银行的基础属性的设置, 实现经营一天的流程(可在此处指定Random Seed, 传给TaskGenerator), 实现最终的报告和数据统计
public class BankSimulation  // 银行仿真模拟.
```

> <Introduction to Java Programming and Data Structures, Comprehensive Version (11th Edition)> P543 关于deep clone 
